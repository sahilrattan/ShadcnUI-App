<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Form Embed</title>
    <style>
      body {
        font-family: sans-serif;
      }

      .form-btn {
        background-color: #2563eb;
        color: white;
        padding: 0.5rem 1rem;
        border-radius: 0.375rem;
        font-size: 1rem;
        font-weight: 500;
        border: none;
        cursor: pointer;
      }

      .form-btn:hover {
        background-color: #1e40af;
      }

      .form-modal-overlay {
        position: fixed;
        inset: 0;
        background-color: rgba(0, 0, 0, 0.6);
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 9999;
      }

      .form-modal {
        background: white;
        border-radius: 0.5rem;
        overflow: hidden;
        width: 90%;
        max-width: 800px;
        height: 80vh;
        position: relative;
      }

      .form-iframe {
        width: 100%;
        height: 100%;
        border: none;
      }

      .form-close {
        position: absolute;
        top: 0.5rem;
        right: 0.75rem;
        font-size: 1.5rem;
        background: none;
        border: none;
        cursor: pointer;
        color: #333;
      }
    </style>
  </head>
  <body>
    <div id="form-embed-container">
      <button class="form-btn" id="openFormBtn">Open Form</button>
    </div>

    <script>
      (function () {
        const params = new URLSearchParams(window.location.search);
        const formId = params.get("formId");

        if (!formId) {
          alert("Form ID is missing in URL!");
          return;
        }

        const previewUrl = `/form-preview/${formId}`; // Can be full URL if hosted externally

        document.getElementById("openFormBtn").onclick = () => {
          const overlay = document.createElement("div");
          overlay.className = "form-modal-overlay";

          const modal = document.createElement("div");
          modal.className = "form-modal";

          const closeBtn = document.createElement("button");
          closeBtn.className = "form-close";
          closeBtn.innerHTML = "&times;";
          closeBtn.onclick = () => document.body.removeChild(overlay);

          const iframe = document.createElement("iframe");
          iframe.className = "form-iframe";
          iframe.src = previewUrl;

          modal.appendChild(closeBtn);
          modal.appendChild(iframe);
          overlay.appendChild(modal);
          document.body.appendChild(overlay);
        };
      })();
    </script>
  </body>
</html>
